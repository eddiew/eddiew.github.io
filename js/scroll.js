$(function(){var t=$(window),n=$("#home"),i=function(){var n=[];return $("#nav").find("a").each(function(){var i=$(this),e=i.attr("href"),a=$($("#main").find(e));n[e.substring(1)]=i,i.click(function(n){n.preventDefault(),$("html, body").stop();var i=a.offset().top;a.innerHeight()<t.innerHeight()&&(i+=a.innerHeight()/2-t.innerHeight()/2);var e=500+500*Math.abs($(document).scrollTop()-i)/t.innerHeight();$("html, body").animate({scrollTop:i},e)})}),n}();i[n.attr("id")].addClass("active"),t.scroll(function(){var e=document.elementFromPoint(221,t.innerHeight()/2);e.id!==n.id&&(i[n.attr("id")].removeClass("active"),n=$(e),i[e.id].addClass("active"))})});