function Slideshow(i){this.activeSlideIdx=0,this.slideTimerId,this.slides=i.children(".slide");var e=0,o=0;this.slides.each(function(i){$(this).innerHeight()>e&&(e=$(this).innerHeight(),o=i)}).eq(o).css("position","static"),this.slides.eq(0).addClass("active")}function getScrollDuration(i){return 500+500*i/$window.height()}function scrollTo(i){$html_body.stop(),$html_body.bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(){$html_body.stop()}),$html_body.animate({scrollTop:i},getScrollDuration(Math.abs($window.scrollTop()-i)),function(){$html_body.unbind("scroll mousedown DOMMouseScroll mousewheel keyup")})}function scrollToTarget(i){var e=i.offset().top;i.innerHeight()<$window.height()&&(e+=i.innerHeight()/2-$window.height()/2),scrollTo(e)}var $html_body=$("html, body"),$window=$(window),_slideshows=$(".slideshow").map(function(){return new Slideshow($(this))}).get();Slideshow.prototype.slideTo=function(i){this.slides.eq(this.activeSlideIdx).removeClass("active"),this.slides.eq(i).addClass("active"),this.activeSlideIdx=i},Slideshow.prototype.slide=function(){this.slideTo((this.activeSlideIdx+1)%this.slides.length)},Slideshow.prototype.autoSlide=function(){var i=this;this.slideTimerId=setInterval(function(){i.slide()},5e3)};var curSection,navLinks=[];$("#nav").find("a").each(function(i){var e=$(this),o=e.attr("href").substring(1),t=$("#"+o);0===i?(curSection=o,e.addClass("active").click(function(i){i.preventDefault(),scrollTo(0)})):e.click(function(i){i.preventDefault(),scrollToTarget(t)}),navLinks[o]=e}),$window.scroll(function(){var i=document.elementFromPoint(221,$window.height()/2);i.id!==curSection&&(navLinks[curSection].removeClass("active"),curSection=i.id,navLinks[curSection].addClass("active"))});var $home=$("#home"),$go=$("#go"),$about=$("#about"),homeHeight=parseInt($home.innerHeight(),10),minHomeHeight=parseInt($home.css("min-height"),10),aboutHeight=homeHeight+parseInt($("about").innerHeight()/2-$window.height()/2,10);$go.click(function(i){i.preventDefault(),scrollToTarget($about)}),$window.scroll(function(){$window.scrollTop()>aboutHeight?$go.addClass("active"):$go.removeClass("active");var i=Math.min(homeHeight-minHomeHeight,$window.scrollTop());$home.innerHeight(homeHeight-i),$home.css("margin-top",i)}),$window.load(function(){_slideshows.forEach(function(i){i.autoSlide()})});